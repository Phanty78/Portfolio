import { getData as t } from './shared.js'
let testimonialsURL = 'data/testimonials.json',
  testimonialsContainer = document.querySelector('.testimonials__container'),
  testimonialIndex = 0,
  testimonialsData = []
function getRandomTestimonialIndex(t, e) {
  return Math.floor(Math.random() * (e - t) + t)
}
function displayTestimonial(t) {
  testimonialsContainer.innerHTML = ''
  let e = document.createElement('div')
  e.classList.add('testimonials__card')
  let i = document.createElement('div')
  i.classList.add('testimonials__name-and-picture-container')
  let s = document.createElement('div')
  s.classList.add('testimonials__name-and-profession-container')
  let a = document.createElement('h3')
  a.classList.add('testimonials__text'), (a.textContent = t.name)
  let n = document.createElement('h4')
  n.classList.add('testimonials__text--profession'),
    (n.textContent = t.profession)
  let l = document.createElement('img')
  l.classList.add('testimonials__picture'),
    l.setAttribute('src', t.pictureURL),
    l.setAttribute('alt', `${t.name} picture`)
  let o = document.createElement('blockquote')
  o.classList.add('testimonials__quote'), (o.textContent = `" ${t.quote} "`)
  let r = document.createElement('a')
  r.classList.add('testimonials__link'),
    (r.textContent = `@ ${t.name}`),
    r.setAttribute('href', t.link),
    r.setAttribute('target', '_blank'),
    r.setAttribute('rel', 'noopener noreferrer')
  let d = document.createElement('img')
  d.classList.add('testimonials__arrow'),
    d.setAttribute('src', './assets/svg/arrow-left.svg'),
    d.setAttribute('alt', 'Previous Testimonial'),
    d.addEventListener('click', showPreviousTestimonials)
  let m = document.createElement('img')
  m.classList.add('testimonials__arrow'),
    m.setAttribute('src', './assets/svg/arrow-right.svg'),
    m.setAttribute('alt', 'Next Testimonial'),
    m.addEventListener('click', showNextTestimonials),
    s.appendChild(a),
    s.appendChild(n),
    i.appendChild(s),
    i.appendChild(l),
    e.appendChild(i),
    e.appendChild(o),
    e.appendChild(r),
    testimonialsContainer.appendChild(d),
    testimonialsContainer.appendChild(e),
    testimonialsContainer.appendChild(m)
}
function showNextTestimonials() {
  testimonialIndex < testimonialsData.length - 1
    ? testimonialIndex++
    : (testimonialIndex = 0),
    displayTestimonial(testimonialsData[testimonialIndex])
}
function showPreviousTestimonials() {
  testimonialIndex > 0
    ? testimonialIndex--
    : (testimonialIndex = testimonialsData.length - 1),
    displayTestimonial(testimonialsData[testimonialIndex])
}
t('data/testimonials.json')
  .then((t) => {
    t &&
      displayTestimonial(
        testimonialsData[
          (testimonialIndex = getRandomTestimonialIndex(
            0,
            (testimonialsData = t).length
          ))
        ]
      )
  })
  .catch((t) => {
    console.error('Error loading testimonials JSON', t)
  })
